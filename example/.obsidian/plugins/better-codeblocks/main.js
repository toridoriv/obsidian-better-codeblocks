//@ts-nocheck
var l=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var M=Object.getOwnPropertyNames;var k=Object.prototype.hasOwnProperty;var i=(n,t)=>l(n,"name",{value:t,configurable:!0});var b=(n,t)=>{for(var e in t)l(n,e,{get:t[e],enumerable:!0})},B=(n,t,e,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of M(t))!k.call(n,r)&&r!==e&&l(n,r,{get:()=>t[r],enumerable:!(o=w(t,r))||o.enumerable});return n};var F=n=>B(l({},"__esModule",{value:!0}),n);var T={};b(T,{default:()=>E});module.exports=F(T);var C=require("obsidian");var x=require("obsidian");function p(n){return n[0]}i(p,"first");function f(n,t){let e=typeof n=="string"?new RegExp(n,"g"):new RegExp(n.source,n.flags||"g");return[...t.matchAll(e)].map(p)}i(f,"matchAll");function u(n){let t=n.split(/<\S*>/),e=f(/<\S*>.*<\/\S*>/,n),o=document.createDocumentFragment();for(let r of t){let c=e.find(d=>d.includes(r)),a=h(c||`<span>${r}</span>`);o.appendChild(a)}return o}i(u,"getMessageFragment");function h(n){return new DOMParser().parseFromString(n.trim(),"text/html").getElementsByTagName("body")[0].firstChild||document.createElement("span")}i(h,"stringToHtml");var s=class n{constructor(t){this.plugin=t}static{i(this,"Announcer")}static#t=null;static plugin;static initialize(t){this.#t||(this.plugin=t,this.#t=new n(this.plugin))}static get instance(){if(!this.#t)throw new Error("Announcer not initialized");return this.#t}createNotice(t,e=1e4){let o=typeof t=="string"?u(t):t,r=document.createElement("footer");return r.textContent=this.plugin.manifest.name+" Plugin",r.style.fontSize="xx-small",r.style.opacity="0.5",r.style.borderTop="1px solid var(--text-muted)",r.style.marginTop="1em",r.style.paddingTop="0.5em",r.style.textAlign="right",o.appendChild(r),new x.Notice(o,e)}success(t,e=15e3){return this.createNotice(`‚ú® ${t}`,e)}info(t,e=15e3){return this.createNotice(`üí¨ ${t}`,e)}failure(t,e=15e3){return this.createNotice(`‚ùå ${t}`,e)}warn(t,e=1e4){let o=document.createDocumentFragment(),r=document.createElement("span");return r.innerHTML="‚ö†Ô∏è",r.classList.add("emoji"),o.append(r," ",u(t)),this.createNotice(o,e)}cannotRun(t,e){return this.warn(`The task <strong><u>${t}</u></strong> cannot be run ${e}.`)}error(t,e,o=2e4){return this.failure(`<p>${t}</p><code>${JSON.stringify({name:e.name,message:e.message,cause:e.cause},null,2)}</code>`,o)}};function y(){let n="if (stream != state.thisLine.stream)",{CodeMirror:t}=window,e=t.modes.markdown.toString(),o=e.indexOf(n),r=e.substring(0,o).replace("function(cmCfg, modeCfg)",""),c=e.substring(o),a="state.quote = 0;",d=[r,a,c].join("");if(e.includes(a+n))return;let g=new Function("cmCfg","modeCfg",`"use strict"; return function markdown(cmCfg, modeCfg) ${d};`)();Object.defineProperty(g,"dependencies",{enumerable:!0,configurable:!0,value:["xml"]}),t.defineMode("markdown",g)}i(y,"patchCodeMirror");var m=class extends C.Plugin{static{i(this,"BetterCodeBlocksPlugin")}onload(){s.initialize(this),y(),s.instance.info("Better Code Blocks plugin loaded!",3e3)}};var E=m;
